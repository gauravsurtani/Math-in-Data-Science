---
title: "Employee Compensation"
author: "Gaurav Surtani"
date: "2023-10-02"
output: html_document
---

# Academic Project Proposal: Employee Compensation Analysis

## Introduction

We chose to look into how people in San Jose get paid for their jobs, basically, their "Employee Compensation." Imagine you're the boss of a city, and you want to make sure everyone is paid fairly and understand where the money is going. That's what we're trying to figure out!

Key Questions:

1. How much money do people in different city departments make?

2. Do different jobs get paid differently, and can we see any trends?

3. Why do some people get extra money for working more hours (overtime)?

4. Is there a connection between how much people get for their normal work (base pay) and other benefits they might get?

## Data

### Data Source

We got our information from the official San Jose Dataset Website [San Jose Employee Compensation Data 2022](https://data.sanjoseca.gov/dataset/employee-compensation-plan/resource/efbf228b-f436-4297-aef2-48980ae1f579). It's like a big list that tells us how much money different workers in San Jose get.

### Data Collection

The data comes from how the city keeps track of paying its workers. It includes details about the regular pay, extra pay for working more hours, and other parts of their payment.

### Cases

Each row in our data is about one worker in the city. So, when we look at the data, it's like looking at each person's payment and salary info.

### Variables

Important things we are looking at:   
- Name: Who the worker is    
- Department: Where they work   
- Job Title: What their job is   
- Total Cash Compensation: How much money they get in total   
- Base Pay: The regular salary   
- Overtime: Extra money for working more hours   
- Other Components: Different parts of their payment package   

### Official Documentation as per San Jose Dataset Website
Name	text		
Department	text		
Job Title (as of 12/31/22)	text		
Total Cash Compensation	text		
Base Pay	text		
Overtime	text		
Sick and Vacation Payouts	text		
Other Cash Compensation	text		
Defined Contribution Plan Contributions - City Paid	text		
Medical Dental Vision	text		
Retirement Contributions (Normal Cost) - City Paid	text		
Long Term Disability, Life, Medicare	text		
Misc Employment Related Costs	text

### Type of Study

We are just looking at the data that's already there; we're not doing any special tests or experiments. It's more like watching and understanding how things are. It's an  observational study.

## References
San Jose Dataset Website [San Jose Employee Compensation Data 2022](https://data.sanjoseca.gov/dataset/employee-compensation-plan/resource/efbf228b-f436-4297-aef2-48980ae1f579).



```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
data <- read.csv("employee-compensation-2022.csv")
head(data)
```

# Know the dimensions
```{r}
dim(data)
```

# Rows and columns
```{r}
nrow(data)
ncol(data)
```

# Checking for data quality issues
```{r}
summary(data)
str(data)
head(data)
```

```{r}
missing_values <- sum(is.na(data))
null_values <- sum(is.null(data))
cat("Number of missing values:", missing_values, "\n")
cat("Number of null values:", null_values, "\n")

cat("Proportion of missing values:", mean(is.na(data)), "\n")
```

```{r}
employee_compensation <- na.omit(data)
dim(employee_compensation)
```

```{r}
missing_values_cleaned <- sum(is.na(employee_compensation))
missing_values_cleaned
```

# Check for duplicates
```{r}
duplicates <- duplicated(employee_compensation)
cat("Number of duplicate rows:", sum(duplicates), "\n")
```

# There are no duplicates in this data

# Now filter top 10 jobs in this dataset based on the count
# Count occurrences of each job title
```{r}
job_title_counts <- table(employee_compensation$Job.Title..as.of.12.31.22.)
```

# Sort in descending order
```{r}
sorted_job_title_counts <- sort(job_title_counts, decreasing = TRUE)
```

# Top 10 job titles
```{r}
top_10_job_titles <- head(names(sorted_job_title_counts), 10)
print(top_10_job_titles)
```

# Filter data to display only data with the top 10 jobs
```{r}
employee_compensation_top10 <- subset(employee_compensation, `Job.Title..as.of.12.31.22.` %in% top_10_job_titles)
head(employee_compensation_top10)
```

# Convert all string columns to float
```{r}
columns_to_convert <- names(employee_compensation_top10)[4:ncol(employee_compensation_top10)]
columns_to_convert
```

# All the data is string, so we need to convert it to float or integer for numerical categorization
```{r}
employee_compensation_top10[columns_to_convert] <- lapply(employee_compensation_top10[columns_to_convert], function(x) {
  numeric_values <- as.numeric(gsub(",", "", x))
  numeric_values[is.na(numeric_values)] <- 0
  return(numeric_values)
})
```

# Checking again for missing values after conversion from String to Integer
```{r}
missing_values1 <- sum(is.na(employee_compensation_top10))
null_values1 <- sum(is.null(employee_compensation_top10))
cat("Number of missing values:", missing_values1, "\n")
cat("Number of null values:", null_values1, "\n")
```